@model List<front.Models.EdifioxUserModel>
@using Auth.Entities

@{
    var CustoModal = new CustomModalModel
            {
                Title = "Editar Edifícios",
                Content = "teste"
            };
}

<div class="card-body pt-4 p-3 mb-3">
    <div class="p-3 shadow">
        <h3>Gerenciar meus Edifícios</h3>
        <div class="row">
            <div class="col-md-6">
                <!-- Coluna dos filtros -->
                <form class="card-body shadow-sm mb-3" id="filtarForm">
                    <h5 class="mb-4">Filtros</h5>

                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <label for="Nome">Nome</label>
                            <input type="text" class="form-control" id="Nome12" placeholder="Digite o Nome">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="Endereco">Endereço</label>
                            <input type="text" class="form-control" id="Endereco12" placeholder="Digite o Endereço">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="codigoUnico">Código Único</label>
                            <input type="text" class="form-control" id="codigoUnico12" placeholder="Digite o Código Único">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="emailResponsavel">email do Responsavel</label>
                            <input type="text" class="form-control" id="emailResponsavel12" placeholder="email do Responsavel">
                        </div>                       
                        <div class="mx-auto d-block text-center gap-2">
                            <button class="btn btn-primary" style="max-width:100px;" type="button" onclick="filtrarEdificios()">
                                Filtrar
                                <i class="bi bi-search"></i>
                            </button>
                            <button class="btn btn-outline-danger " style="max-width:100px;" type="button" onclick="limpaFiltroEdificios()">
                                Limpar
                                <i class="bi bi-x-square"></i>
                            </button>
                        </div>

                    </div>
                </form>
                <!-- Coluna da Lista de Usuários que sera redenrizada pelo html PARVIEW -->
                <partial name="_EdificioxUserPartial" model="Model" />
                
            </div>


            <!-- Coluna do Formulário -->
            <div class="col-md-3">
                <div class="card p-3 shadow">
                    <button  onclick="openModal()">Abrir</button>
                    <partial name="_CustomModal" model="CustoModal" />
                </div>
            </div>

            <!-- Coluna do Associa  -->
            <div class="col-md-3" id="stickytypeheader">
                <div class="card p-3 shadow">
                    3
                </div>
            </div>



        </div>
    </div>
</div>

<script>

    // Função para filtrar Edificios
    function filtrarEdificios() {        
            var page = 1;
            var Endereco = $("#Endereco12").val();
            var emailResponsavel = $("#emailResponsavel12").val();
            var CodUnico = $("#codigoUnico12").val();
            var nome = $("#Nome12").val();

            $.ajax({
                url: '@Url.Action("GetEdificioList", "EdificiosAtivos")',
                type: 'GET',
                data: {
                    page: page,
                    emailResponsavel: emailResponsavel,
                    Endereco: Endereco,
                    nome: nome,
                    CodUnico: CodUnico 
                },
                success: function (data) {
                    $("#EDIFICIOSXUSER").html(data);  
                },
                error: function (error) {
                    showWarningNotification('Não foi possível filtrar');
                    reject(error);
                }
            });        
    }

    function limpaFiltroEdificios() {
        $("#emailResponsavel12").val("");
        $("#Endereco12").val("");
        $("#codigoUnico12").val("");
        $("#Nome12").val("");
        filtrarEdificios()            
    }

</script>